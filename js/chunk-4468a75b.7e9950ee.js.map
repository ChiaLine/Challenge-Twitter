{"version":3,"sources":["webpack:///./src/views/Chatroom.vue?508e","webpack:///./src/components/ChatroomUserCards.vue?b895","webpack:///src/components/ChatroomUserCards.vue","webpack:///./src/components/ChatroomUserCards.vue?67ab","webpack:///./src/components/ChatroomUserCards.vue","webpack:///src/views/Chatroom.vue","webpack:///./src/views/Chatroom.vue?828b","webpack:///./src/views/Chatroom.vue","webpack:///./src/views/Chatroom.vue?ad64","webpack:///./src/components/ChatroomUserCards.vue?984c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","afterShowTweetModal","attrs","users","_v","_l","message","key","index","class","notification","typeId","_s","content","_e","_f","avatar","time","previousMessages","length","directives","name","rawName","value","expression","domProps","$event","type","indexOf","_k","keyCode","sendMessage","apply","arguments","target","composing","inputMessage","afterHideModal","staticRenderFns","user","UserId","account","mixins","props","required","component","components","NavBar","TweetModal","ChatroomUserCards","data","showModal","messages","computed","mapState","methods","$socket","client","emit","connectUser","disconnectUser","sockets","id","created","beforeDestroy","off"],"mappings":"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","file":"js/chunk-4468a75b.7e9950ee.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-100 row\"},[_c('NavBar',{staticClass:\"col-md-2\",on:{\"after-show-tweet-modal\":_vm.afterShowTweetModal}}),_c('div',{staticClass:\"col-md-10 d-flex h-100\"},[_c('div',{staticClass:\"chatroom-users \"},[_c('ChatroomUserCards',{attrs:{\"users\":_vm.users}})],1),_c('div',{staticClass:\"chatroom-content\"},[_c('h5',{staticClass:\"chatroom-content-title p-3\"},[_vm._v(\"公開聊天室\")]),_c('div',{staticClass:\"chatroom-container\"},[_c('div',{staticClass:\"display-container\"},[_vm._l((_vm.messages),function(message){return _c('div',{key:message.index,class:{\n              notification: message.typeId === 1,\n              'card-other': message.typeId === 2,\n              'card-self': message.typeId === 3,\n            }},[(message.typeId === 1)?_c('span',[_vm._v(_vm._s(message.content))]):_vm._e(),(message.typeId === 2)?_c('div',{staticClass:\"card-other-container\"},[_c('div',{staticClass:\"img-container\"},[_c('img',{attrs:{\"src\":_vm._f(\"emptyImage\")(message.avatar),\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"content-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])])]):_vm._e(),(message.typeId === 3)?_c('div',{staticClass:\"card-self-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])]):_vm._e()])}),(_vm.previousMessages.length > 0)?_vm._l((_vm.previousMessages),function(message){return _c('div',{key:message.index,class:{\n                notification: message.typeId === 1,\n                'card-other': message.typeId === 2,\n                'card-self': message.typeId === 3,\n              }},[(message.typeId === 1)?_c('span',[_vm._v(_vm._s(message.content))]):_vm._e(),(message.typeId === 2)?_c('div',{staticClass:\"card-other-container\"},[_c('div',{staticClass:\"img-container\"},[_c('img',{attrs:{\"src\":_vm._f(\"emptyImage\")(message.avatar),\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"content-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])])]):_vm._e(),(message.typeId === 3)?_c('div',{staticClass:\"card-self-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])]):_vm._e()])}):_vm._e()],2),_c('div',{staticClass:\"input-container\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputMessage),expression:\"inputMessage\"}],attrs:{\"type\":\"text\",\"placeholder\":\"輸入訊息...\"},domProps:{\"value\":(_vm.inputMessage)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage.apply(null, arguments)},\"input\":function($event){if($event.target.composing){ return; }_vm.inputMessage=$event.target.value}}}),_c('button',{on:{\"click\":_vm.sendMessage}},[_c('img',{attrs:{\"src\":\"https://i.imgur.com/Jrjlukd.jpg\",\"alt\":\"\"}})])])])])]),(_vm.showModal)?_c('TweetModal',{on:{\"after-hide-modal\":_vm.afterHideModal}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chatroom-container\"},[_c('p',{staticClass:\"chatroom-title\"},[_vm._v(\"上線 (\"+_vm._s(_vm.users.length)+\")\")]),_c('div',{staticClass:\"chatroom-cards\"},_vm._l((_vm.users),function(user){return _c('div',{key:user.UserId,staticClass:\"chatroom-card d-flex justify-content-start align-items-center\"},[_c('img',{staticClass:\"chatroom-card-img\",attrs:{\"src\":_vm._f(\"emptyImage\")(user.avatar)}}),_c('p',{staticClass:\"chatroom-card-name\"},[_vm._v(_vm._s(user.name))]),_c('p',{staticClass:\"chatroom-card-account\"},[_vm._v(\"＠\"+_vm._s(user.account))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n <div class=\"chatroom-container\">\n    <p class=\"chatroom-title\">上線 ({{users.length}})</p>\n    <div class=\"chatroom-cards\">\n      <div class=\"chatroom-card d-flex justify-content-start align-items-center\"\n      v-for=\"user in users\"\n      :key=\"user.UserId\"\n      >\n        <img class=\"chatroom-card-img\" :src=\" user.avatar | emptyImage\"/>\n        <p class=\"chatroom-card-name\">{{user.name}}</p>\n        <p class=\"chatroom-card-account\">＠{{user.account}}</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from \"../utils/mixins\";\n\nexport default {\n  name: 'ChatroomCards',\n  mixins: [emptyImageFilter],\n  props: {\n    users: {\n      type: Array,\n      required: true,\n    }\n  },\n}\n</script>\n\n<style scoped style lang=\"scss\">\n@import \"../assets/scss/_color.scss\";\n.chatroom-container {\n  width: 390px;\n}\n.chatroom-title {\n  height: 74px;\n  line-height: 74px;\n  padding-left: 23px;\n  font-size: 24px;\n  font-weight: 700;\n  border-bottom: 1px solid $modal-outline;\n}\n.chatroom-card {\n  padding: 10px 10px 10px 15px;\n  border-bottom: 1px solid $modal-outline;\n}\n.chatroom-card-name {\n  font-weight: 700;\n  margin: 6px 0 6px 10px;\n}\n.chatroom-card-account {\n  margin-left: 10px;\n  font-weight: 400;\n  color: #6C757D;\n}\n.chatroom-card-img {\n  width: 50px;\n  height: 50px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatroomUserCards.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatroomUserCards.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatroomUserCards.vue?vue&type=template&id=58497795&scoped=true&\"\nimport script from \"./ChatroomUserCards.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatroomUserCards.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatroomUserCards.vue?vue&type=style&index=0&id=58497795&scoped=true&style=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58497795\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"h-100 row\">\n    <NavBar class=\"col-md-2\" @after-show-tweet-modal=\"afterShowTweetModal\" />\n\n    <div class=\"col-md-10 d-flex h-100\">\n      <!-- 左區卡片 -->\n      <div class=\"chatroom-users \">\n        <ChatroomUserCards :users=\"users\" />\n      </div>\n\n      <!-- 右區聊天室 -->\n      <div class=\"chatroom-content\">\n        <h5 class=\"chatroom-content-title p-3\">公開聊天室</h5>\n        <div class=\"chatroom-container\">\n          <div class=\"display-container\">\n            <!-- 注意！訊息上下順序是相反的(column-reverse) -->\n            <!-- 判斷是哪種訊息，搭配對應的class -->\n            <div\n              v-for=\"message in messages\"\n              :key=\"message.index\"\n              :class=\"{\n                notification: message.typeId === 1,\n                'card-other': message.typeId === 2,\n                'card-self': message.typeId === 3,\n              }\"\n            >\n              <!-- v-if判斷相應內容 -->\n              <!-- 1:上線離線通知 -->\n              <span v-if=\"message.typeId === 1\">{{ message.content }}</span>\n              <!-- 2:其他使用者的訊息 -->\n              <div v-if=\"message.typeId === 2\" class=\"card-other-container\">\n                <div class=\"img-container\">\n                  <img :src=\"message.avatar | emptyImage\" alt=\"avatar\" />\n                </div>\n                <div class=\"content-container\">\n                  <div class=\"text\">\n                    {{ message.content }}\n                  </div>\n                  <p class=\"time\">{{ message.time | formatDate }}</p>\n                </div>\n              </div>\n              <!-- 3:自己的訊息 -->\n              <div v-if=\"message.typeId === 3\" class=\"card-self-container\">\n                <div class=\"text\">\n                  {{ message.content }}\n                </div>\n                <p class=\"time\">{{ message.time | formatDate }}</p>\n              </div>\n            </div>\n            <!-- 秀歷史訊息 -->\n            <template v-if=\"previousMessages.length > 0\">\n              <div\n                v-for=\"message in previousMessages\"\n                :key=\"message.index\"\n                :class=\"{\n                  notification: message.typeId === 1,\n                  'card-other': message.typeId === 2,\n                  'card-self': message.typeId === 3,\n                }\"\n              >\n                <!-- v-if判斷相應內容 -->\n                <!-- 1:上線離線通知 -->\n                <span v-if=\"message.typeId === 1\">{{ message.content }}</span>\n                <!-- 2:其他使用者的訊息 -->\n                <div v-if=\"message.typeId === 2\" class=\"card-other-container\">\n                  <div class=\"img-container\">\n                    <img :src=\"message.avatar | emptyImage\" alt=\"avatar\" />\n                  </div>\n                  <div class=\"content-container\">\n                    <div class=\"text\">\n                      {{ message.content }}\n                    </div>\n                    <p class=\"time\">{{ message.time | formatDate }}</p>\n                  </div>\n                </div>\n                <!-- 3:自己的訊息 -->\n                <div v-if=\"message.typeId === 3\" class=\"card-self-container\">\n                  <div class=\"text\">\n                    {{ message.content }}\n                  </div>\n                  <p class=\"time\">{{ message.time | formatDate }}</p>\n                </div>\n              </div>\n            </template>\n          </div>\n          <div class=\"input-container\">\n            <input\n              @keyup.enter=\"sendMessage\"\n              v-model=\"inputMessage\"\n              type=\"text\"\n              placeholder=\"輸入訊息...\"\n            />\n            <button @click=\"sendMessage\">\n              <img src=\"https://i.imgur.com/Jrjlukd.jpg\" alt=\"\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <TweetModal v-if=\"showModal\" @after-hide-modal=\"afterHideModal\" />\n  </div>\n</template>\n\n<script>\nimport NavBar from \"../components/NavBar.vue\";\nimport ChatroomUserCards from \"../components/ChatroomUserCards.vue\";\nimport TweetModal from \"../components/TweetModal.vue\";\nimport { mapState } from \"vuex\";\nimport { formatDateFilter } from \"./../utils/mixins\";\nimport { emptyImageFilter } from \"../utils/mixins\";\n\nexport default {\n  name: \"Chatroom\",\n  components: {\n    NavBar,\n    TweetModal,\n    ChatroomUserCards,\n  },\n  data() {\n    return {\n      showModal: false,\n      messages: [],\n      inputMessage: \"\",\n      users: [],\n      previousMessages: [],\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  mixins: [emptyImageFilter, formatDateFilter],\n  methods: {\n    afterShowTweetModal() {\n      this.showModal = true;\n    },\n    afterHideModal() {\n      this.showModal = false;\n    },\n    sendMessage() {\n      if (this.inputMessage) {\n        this.$socket.client.emit(\"public message\", this.inputMessage);\n        this.inputMessage = \"\";\n      }\n    },\n    // 頁面切換 進入公開聊天室時呼叫(created)\n    connectUser() {\n      this.$socket.client.emit(\"enter chatroom\");\n    },\n    // 頁面切換 離開公開聊天室時呼叫(beforeDestroy)\n    disconnectUser() {\n      this.$socket.client.emit(\"leave chatroom\");\n    },\n  },\n  // 監聽事件放的位置\n  sockets: {\n    // 獲取歷史聊天紀錄（後端只有在被告知使用者上線時，才會送出）\n    [`render public messages`]: function (data) {\n      for (let i = 0; i < data.length; i++) {\n        const msg = data[i];\n        if (msg.senderId === this.currentUser.id) {\n          const thisMessage = {\n            id: -1,\n            content: msg.message,\n            typeId: 3,\n            type: \"self\",\n            time: msg.createdAt,\n            avatar: \"\",\n          };\n          this.previousMessages.unshift(thisMessage);\n        } else {\n          const thisMessage = {\n            id: -1,\n            content: msg.message,\n            typeId: 2,\n            type: \"other\",\n            time: msg.createdAt,\n            avatar: msg.Receiver.avatar,\n          };\n          this.previousMessages.unshift(thisMessage);\n        }\n      }\n    },\n    // 接收目前在聊天室的使用者清單\n    users: function (users) {\n      this.users = users;\n    },\n    // 接收訊息其他使用者、自己的文字訊息\n    [`public message`]: function (msg) {\n      if (msg.senderId === this.currentUser.id) {\n        const thisMessage = {\n          id: -1,\n          content: msg.message,\n          typeId: 3,\n          type: \"self\",\n          time: msg.createdAt,\n          avatar: \"\",\n        };\n        this.messages.unshift(thisMessage);\n      } else {\n        const thisMessage = {\n          id: -1,\n          content: msg.message,\n          typeId: 2,\n          type: \"other\",\n          time: msg.createdAt,\n          avatar: msg.senderAvatar,\n        };\n        this.messages.unshift(thisMessage);\n      }\n    },\n    // 接收並顯示使用者 上線通知訊息\n    [`user connect`]: function (msg) {\n      const thisMessage = {\n        id: -1,\n        content: msg,\n        typeId: 1,\n        type: \"notification\",\n        time: \"\",\n        avatar: \"\",\n      };\n      this.messages.unshift(thisMessage);\n    },\n    // 接收並顯示使用者 離線通知訊息\n    [`user disconnect`]: function (msg) {\n      const thisMessage = {\n        id: -1,\n        content: msg,\n        typeId: 1,\n        type: \"notification\",\n        time: \"\",\n        avatar: \"\",\n      };\n      this.messages.unshift(thisMessage);\n    },\n  },\n  created() {\n    // 告知伺服器使用者上線\n    this.connectUser();\n  },\n  beforeDestroy() {\n    // 離開頁面時告知後端伺服器\n    this.disconnectUser();\n    // 新增\n    this.$socket.client.off(\"render public messages\");\n    this.$socket.client.off(\"users\");\n    this.$socket.client.off(\"public message\");\n    this.$socket.client.off(\"user connect\");\n    this.$socket.client.off(\"user disconnect\");\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// 聊天室訊息輸入框、訊息顯示區域設定\n@import \"../assets/scss/chatroom.scss\";\n\n/* 左區卡片 */\n.chatroom-users {\n  width: 30%;\n  border-left: 1px solid #e6ecf0;\n  border-right: 1px solid #e6ecf0;\n}\n\n.chatroom-content {\n  width: 70%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.chatroom-content-title {\n  height: 74px;\n  line-height: 37px;\n  font-size: 24px;\n  font-weight: 700;\n  border-bottom: 1px solid #e6ecf0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chatroom.vue?vue&type=template&id=b2969b4a&scoped=true&\"\nimport script from \"./Chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./Chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chatroom.vue?vue&type=style&index=0&id=b2969b4a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2969b4a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=style&index=0&id=b2969b4a&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatroomUserCards.vue?vue&type=style&index=0&id=58497795&scoped=true&style=true&lang=scss&\""],"sourceRoot":""}