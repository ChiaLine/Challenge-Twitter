{"version":3,"sources":["webpack:///./src/views/Message.vue?a2e8","webpack:///./src/components/MessageUserCards.vue?05d3","webpack:///./src/views/Message.vue?f37f","webpack:///./src/components/MessageUserCards.vue?5e37","webpack:///src/components/MessageUserCards.vue","webpack:///./src/components/MessageUserCards.vue?86c4","webpack:///./src/components/MessageUserCards.vue","webpack:///src/views/Message.vue","webpack:///./src/views/Message.vue?14a2","webpack:///./src/views/Message.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","afterShowTweetModal","attrs","rooms","changeRoomId","thisMessageName","length","_v","_s","name","account","_l","message","key","index","class","notification","typeId","content","_e","_f","avatar","time","previousMessages","directives","rawName","value","expression","domProps","$event","type","indexOf","_k","keyCode","sendMessage","apply","arguments","target","composing","inputMessage","_m","afterHideModal","staticRenderFns","room","stopPropagation","preventDefault","getPrivateMessages","id","receiver","introduction","createdAt","mixins","props","required","methods","roomId","$socket","client","emit","$emit","console","component","components","NavBar","TweetModal","MessageUserCards","data","showModal","messages","currentRoomId","computed","mapState","newRoomId","connectUser","disconnectUser","sockets","created","beforeDestroy","off"],"mappings":"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","file":"js/chunk-5b09dfa8.2487187b.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=fc839f76&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageUserCards.vue?vue&type=style&index=0&id=c979f010&scoped=true&style=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-100 row\"},[_c('NavBar',{staticClass:\"col-md-2\",on:{\"after-show-tweet-modal\":_vm.afterShowTweetModal}}),_c('div',{staticClass:\"col-md-10 d-flex h-100\"},[_c('div',{staticClass:\"message-users\"},[_c('MessageUserCards',{attrs:{\"rooms\":_vm.rooms},on:{\"change-room-id\":_vm.changeRoomId}})],1),_c('div',{staticClass:\"message-content\"},[(!_vm.thisMessageName.length)?_c('div',{staticClass:\"message-content-title\"}):_c('div',{staticClass:\"message-content-title\"},[_c('p',{staticClass:\"message-content-name\"},[_vm._v(_vm._s(_vm.thisMessageName[0].name))]),_c('span',{staticClass:\"message-content-account\"},[_vm._v(\"@\"+_vm._s(_vm.thisMessageName[0].account))])]),(!_vm.thisMessageName.length)?_c('div',{staticClass:\"chatroom-container\"},[_vm._m(0),_vm._m(1)]):_c('div',{staticClass:\"chatroom-container\"},[_c('div',{staticClass:\"display-container\"},[_vm._l((_vm.messages),function(message){return _c('div',{key:message.index,class:{\n              notification: message.typeId === 1,\n              'card-other': message.typeId === 2,\n              'card-self': message.typeId === 3,\n            }},[(message.typeId === 1)?_c('span',[_vm._v(_vm._s(message.content))]):_vm._e(),(message.typeId === 2)?_c('div',{staticClass:\"card-other-container\"},[_c('div',{staticClass:\"img-container\"},[_c('img',{attrs:{\"src\":_vm._f(\"emptyImage\")(message.avatar),\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"content-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])])]):_vm._e(),(message.typeId === 3)?_c('div',{staticClass:\"card-self-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])]):_vm._e()])}),(_vm.previousMessages.length > 0)?_vm._l((_vm.previousMessages),function(message){return _c('div',{key:message.index,class:{\n                notification: message.typeId === 1,\n                'card-other': message.typeId === 2,\n                'card-self': message.typeId === 3,\n              }},[(message.typeId === 1)?_c('span',[_vm._v(_vm._s(message.content))]):_vm._e(),(message.typeId === 2)?_c('div',{staticClass:\"card-other-container\"},[_c('div',{staticClass:\"img-container\"},[_c('img',{attrs:{\"src\":_vm._f(\"emptyImage\")(message.avatar),\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"content-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])])]):_vm._e(),(message.typeId === 3)?_c('div',{staticClass:\"card-self-container\"},[_c('div',{staticClass:\"text\"},[_vm._v(\" \"+_vm._s(message.content)+\" \")]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"formatDate\")(message.time)))])]):_vm._e()])}):_vm._e()],2),_c('div',{staticClass:\"input-container\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputMessage),expression:\"inputMessage\"}],attrs:{\"type\":\"text\",\"placeholder\":\"輸入訊息...\"},domProps:{\"value\":(_vm.inputMessage)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage.apply(null, arguments)},\"input\":function($event){if($event.target.composing){ return; }_vm.inputMessage=$event.target.value}}}),_c('button',{on:{\"click\":_vm.sendMessage}},[_c('img',{attrs:{\"src\":\"https://i.imgur.com/Jrjlukd.jpg\",\"alt\":\"\"}})])])])])]),(_vm.showModal)?_c('TweetModal',{on:{\"after-hide-modal\":_vm.afterHideModal}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"display-container-text\"},[_c('div',{staticClass:\"display-container-img\"},[_c('img',{attrs:{\"src\":\"https://i.imgur.com/VG0wE3w.jpg\"}})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"input-container\"},[_c('input',{staticClass:\"input-container-cursor-not-allowed\",attrs:{\"type\":\"text\",\"placeholder\":\"無法輸入訊息...\",\"disabled\":\"\"}}),_c('button',{staticClass:\"input-container-cursor-not-allowed\"},[_c('img',{attrs:{\"src\":\"https://i.imgur.com/Jrjlukd.jpg\"}})])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message\"},[_c('p',{staticClass:\"message-title\"},[_vm._v(\"訊息\")]),_c('div',{staticClass:\"message-cards\"},_vm._l((_vm.rooms),function(room){return _c('div',{key:room.index,staticClass:\"message-card d-flex justify-content-start align-items-center\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.getPrivateMessages(room.id)}}},[_c('img',{staticClass:\"message-card-img\",attrs:{\"src\":_vm._f(\"emptyImage\")(room.receiver.avatar)}}),_c('div',{staticClass:\"message-content\"},[_c('p',{staticClass:\"message-name\"},[_vm._v(\" \"+_vm._s(room.receiver.name)+\" \"),_c('span',{staticClass:\"message-account\"},[_vm._v(\" @\"+_vm._s(room.receiver.account)+\" \")])]),_c('p',{staticClass:\"message-description\"},[_vm._v(_vm._s(room.receiver.introduction))])]),_c('div',{staticClass:\"message-time\"},[_vm._v(_vm._s(_vm._f(\"fromNow\")(room.createdAt)))])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"message\">\n    <p class=\"message-title\">訊息</p>\n    <div class=\"message-cards\">\n      <div\n        v-for=\"room in rooms\"\n        :key=\"room.index\"\n        @click.stop.prevent=\"getPrivateMessages(room.id)\"\n        class=\"message-card d-flex justify-content-start align-items-center\"\n      >\n        <img\n          class=\"message-card-img\"\n          :src=\"room.receiver.avatar | emptyImage\"\n        />\n        <div class=\"message-content\">\n          <p class=\"message-name\">\n            {{ room.receiver.name }}\n            <span class=\"message-account\"> @{{ room.receiver.account }} </span>\n          </p>\n          <p class=\"message-description\">{{ room.receiver.introduction }}</p>\n        </div>\n        <div class=\"message-time\">{{ room.createdAt | fromNow }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from \"../utils/mixins\";\nimport { fromNowFilter } from \"./../utils/mixins\";\n\nexport default {\n  name: \"MessageUsersCards\",\n  mixins: [emptyImageFilter, fromNowFilter],\n  props: {\n    rooms: {\n      type: Array,\n      required: true,\n    },\n  },\n  methods: {\n    getPrivateMessages(roomId) {\n      this.$socket.client.emit(\"get private messages\", roomId);\n      this.$emit('change-room-id', roomId)\n      console.log(`get private messages: ${roomId}`);\n    },\n  },\n};\n</script>\n\n<style scoped style lang=\"scss\">\n@import \"../assets/scss/_color.scss\";\n.message {\n  // width: 390px;\n  height: 100%;\n  overflow-y: scroll;\n}\n.message-title {\n  height: 74px;\n  line-height: 74px;\n  padding-left: 23px;\n  font-size: 24px;\n  font-weight: 700;\n  border-bottom: 1px solid $modal-outline;\n}\n.message-card {\n  position: relative;\n  padding: 10px 10px 10px 15px;\n  border-bottom: 1px solid $modal-outline;\n  cursor: pointer;\n}\n.message-card-img {\n  width: 50px;\n  height: 50px;\n}\n.message-content {\n  margin-left: 10px;\n}\n.message-name {\n  font-weight: 700;\n}\n.message-description {\n  width: 300px;\n}\n.message-account {\n  color: #6c757d;\n}\n.message-time {\n  position: absolute;\n  right: 14px;\n  top: 16px;\n  color: #6c757d;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageUserCards.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageUserCards.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageUserCards.vue?vue&type=template&id=c979f010&scoped=true&\"\nimport script from \"./MessageUserCards.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageUserCards.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageUserCards.vue?vue&type=style&index=0&id=c979f010&scoped=true&style=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c979f010\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"h-100 row\">\n    <NavBar class=\"col-md-2\" @after-show-tweet-modal=\"afterShowTweetModal\" />\n    \n    <div class=\"col-md-10 d-flex h-100\">\n      <!-- 左區卡片 -->\n      <div class=\"message-users\">\n        <MessageUserCards :rooms=\"rooms\" @change-room-id=\"changeRoomId\" />\n      </div>\n      <!-- 右區聊天室 -->\n      <div class=\"message-content\">\n        <!-- 新增 聊天室上方 標題區塊的 顯示判斷 -->\n        <div class=\"message-content-title\" v-if=\"!thisMessageName.length\">\n          <!-- 顯示空白內容 -->\n        </div>\n        <div class=\"message-content-title\" v-else>\n          <p class=\"message-content-name\">{{thisMessageName[0].name}}</p>\n          <span class=\"message-content-account\">@{{thisMessageName[0].account}}</span>\n        </div>\n        <!-- 新增 聊天室底下 訊息區塊的 顯示判斷 -->\n        <div class=\"chatroom-container\" v-if=\"!thisMessageName.length\">\n          <!-- 新增 訊息區塊內 圖片提示 -->\n          <div class=\"display-container-text\">\n            <div class=\"display-container-img\">\n              <img src=\"https://i.imgur.com/VG0wE3w.jpg\" >\n            </div>\n          </div>\n          <!-- 新增 訊息區塊內 輸入框禁用提示 -->\n          <div class=\"input-container\">\n            <input\n              class=\"input-container-cursor-not-allowed\"\n              type=\"text\"\n              placeholder=\"無法輸入訊息...\"\n              disabled\n            />\n            <button class=\"input-container-cursor-not-allowed\">\n              <img src=\"https://i.imgur.com/Jrjlukd.jpg\" />\n            </button>\n          </div>\n        </div>\n        <div class=\"chatroom-container\" v-else>\n          <div class=\"display-container\">\n            <!-- 注意！訊息上下順序是相反的(column-reverse) -->\n            <!-- 判斷是哪種訊息，搭配對應的class -->\n            <div\n              v-for=\"message in messages\"\n              :key=\"message.index\"\n              :class=\"{\n                notification: message.typeId === 1,\n                'card-other': message.typeId === 2,\n                'card-self': message.typeId === 3,\n              }\"\n            >\n              <!-- v-if判斷相應內容 -->\n              <!-- 1:上線離線通知 -->\n              <span v-if=\"message.typeId === 1\">{{ message.content }}</span>\n              <!-- 2:其他使用者的訊息 -->\n              <div v-if=\"message.typeId === 2\" class=\"card-other-container\">\n                <div class=\"img-container\">\n                  <img :src=\"message.avatar | emptyImage\" alt=\"avatar\" />\n                </div>\n                <div class=\"content-container\">\n                  <div class=\"text\">\n                    {{ message.content }}\n                  </div>\n                  <p class=\"time\">{{ message.time | formatDate }}</p>\n                </div>\n              </div>\n              <!-- 3:自己的訊息 -->\n              <div v-if=\"message.typeId === 3\" class=\"card-self-container\">\n                <div class=\"text\">\n                  {{ message.content }}\n                </div>\n                <p class=\"time\">{{ message.time | formatDate }}</p>\n              </div>\n            </div>\n            <!-- 秀歷史訊息 -->\n            <template v-if=\"previousMessages.length > 0\">\n              <div\n                v-for=\"message in previousMessages\"\n                :key=\"message.index\"\n                :class=\"{\n                  notification: message.typeId === 1,\n                  'card-other': message.typeId === 2,\n                  'card-self': message.typeId === 3,\n                }\"\n              >\n                <!-- v-if判斷相應內容 -->\n                <!-- 1:上線離線通知 -->\n                <span v-if=\"message.typeId === 1\">{{ message.content }}</span>\n                <!-- 2:其他使用者的訊息 -->\n                <div v-if=\"message.typeId === 2\" class=\"card-other-container\">\n                  <div class=\"img-container\">\n                    <img :src=\"message.avatar | emptyImage\" alt=\"avatar\" />\n                  </div>\n                  <div class=\"content-container\">\n                    <div class=\"text\">\n                      {{ message.content }}\n                    </div>\n                    <p class=\"time\">{{ message.time | formatDate }}</p>\n                  </div>\n                </div>\n                <!-- 3:自己的訊息 -->\n                <div v-if=\"message.typeId === 3\" class=\"card-self-container\">\n                  <div class=\"text\">\n                    {{ message.content }}\n                  </div>\n                  <p class=\"time\">{{ message.time | formatDate }}</p>\n                </div>\n              </div>\n            </template>\n          </div>\n          <div class=\"input-container\">\n            <input\n              @keyup.enter=\"sendMessage\"\n              v-model=\"inputMessage\"\n              type=\"text\"\n              placeholder=\"輸入訊息...\"\n            />\n            <button @click=\"sendMessage\">\n              <img src=\"https://i.imgur.com/Jrjlukd.jpg\" alt=\"\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <TweetModal v-if=\"showModal\" @after-hide-modal=\"afterHideModal\" />\n  </div>\n</template>\n\n<script>\nimport NavBar from \"../components/NavBar.vue\";\nimport TweetModal from \"../components/TweetModal.vue\";\nimport MessageUserCards from \"../components/MessageUserCards.vue\";\nimport { mapState } from \"vuex\";\nimport { formatDateFilter } from \"./../utils/mixins\";\nimport { emptyImageFilter } from \"../utils/mixins\";\n\nexport default {\n  name: \"Message\",\n  components: {\n    NavBar,\n    TweetModal,\n    MessageUserCards,\n  },\n  data() {\n    return {\n      showModal: false,\n      messages: [],\n      inputMessage: \"\",\n      rooms: [],\n      previousMessages: [],\n      currentRoomId: -1,\n      thisMessageName: [],\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  mixins: [emptyImageFilter, formatDateFilter],\n  methods: {\n    afterShowTweetModal() {\n      this.showModal = true;\n    },\n    afterHideModal() {\n      this.showModal = false;\n    },\n    changeRoomId(newRoomId) {\n      console.log(\"newRoomId\", newRoomId);\n      if (this.currentRoomId !== newRoomId) {\n        this.currentRoomId = newRoomId;\n        // 切換私聊房間後，清空對話紀錄\n        this.messages = [];\n      }\n    },\n    sendMessage() {\n      if (this.inputMessage) {\n        console.log(\"sendMessage: \", this.inputMessage);\n        this.$socket.client.emit(\"private message\", {\n          roomId: this.currentRoomId,\n          message: this.inputMessage,\n        });\n        this.inputMessage = \"\";\n      }\n    },\n    // 頁面切換時 進入私人聊天室 呼叫(created)\n    connectUser() {\n      console.log(\"進入私人聊天室\");\n      this.$socket.client.emit(\"enter private room\");\n    },\n    // 頁面離開時 離開私人聊天室 呼叫(beforeDestroy)\n    disconnectUser() {\n      console.log(\"離開私人聊天室\");\n      this.$socket.client.emit(\"leave chatroom\");\n    },\n  },\n  // 監聽事件放的位置\n  sockets: {\n    // connect: function () {\n    //   console.log(\"私人聊天室 web socket success\");\n    // },\n    // 接收私信列表\n    [`private message list`]: function (users) {\n      console.log(\"接收私信使用者的列表: \", users);\n      this.rooms = users;\n      this.currentRoomId = users[0].id;\n    },\n    // 獲取歷史聊天紀錄（???）\n    [`render private messages`]: function (data) {\n      console.log(\"獲取歷史訊息: \", data);\n      // 清空歷史訊息\n      this.previousMessages = []\n      this.thisMessageName = []\n      // 更新要聊天的朋友名稱\n      this.thisMessageName.push(data.otherUser);\n      // 更新歷史訊息資料\n      for (let i = 0; i < data.messages.length; i++) {\n        const msg = data.messages[i];\n        if (msg.senderId === this.currentUser.id) {\n          const thisMessage = {\n            id: -1,\n            content: msg.message,\n            typeId: 3,\n            type: \"self\",\n            time: msg.createdAt,\n            avatar: \"\",\n          };\n          this.previousMessages.unshift(thisMessage);\n        } else {\n          const thisMessage = {\n            id: -1,\n            content: msg.message,\n            typeId: 2,\n            type: \"other\",\n            time: msg.createdAt,\n            avatar: msg.Receiver.avatar,\n          };\n          this.previousMessages.unshift(thisMessage);\n        }\n      }\n    },\n    // 接收私人消息\n    [`private message`]: function (msg) {\n      console.log(\"接收私人訊息: \", msg);\n      if (msg.senderId === this.currentUser.id) {\n        const thisMessage = {\n          id: -1,\n          content: msg.message,\n          typeId: 3,\n          type: \"self\",\n          time: msg.createdAt,\n          avatar: \"\",\n        };\n        this.messages.unshift(thisMessage);\n      } else {\n        const thisMessage = {\n          id: -1,\n          content: msg.message,\n          typeId: 2,\n          type: \"other\",\n          time: msg.createdAt,\n          avatar: msg.senderAvatar,\n        };\n        this.messages.unshift(thisMessage);\n      }\n    },\n  },\n  created() {\n    // 告知伺服器使用者上線\n    this.connectUser();\n  },\n  beforeDestroy() {\n    // 離開頁面時告知後端伺服器\n    this.disconnectUser();\n    // 新增\n    this.$socket.client.off(\"render private messages\");\n    this.$socket.client.off(\"private message list\");\n    this.$socket.client.off(\"private message\");\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// 聊天室訊息輸入框、訊息顯示區域設定\n@import \"../assets/scss/chatroom.scss\";\n/* 左區卡片 */\n.message-users {\n  width: 40%;\n  border-left: 1px solid #e6ecf0;\n  border-right: 1px solid #e6ecf0;\n}\n\n/* 右區聊天室 */\n.message-content {\n  width: 60%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.message-content-title {\n  height: 74px;\n  border-bottom: 1px solid #e6ecf0;\n}\n\n.message-content-name {\n  margin-left: 24px;\n  font-size: 24px;\n  font-weight: 700;\n}\n\n.message-content-account {\n  margin-left: 20px;\n  color: #6c757d;\n}\n\n/* 聊天內容區 */\n.message-container {\n  height: calc(100vh - 130px);\n}\n.message-panel {\n  height: 64px;\n  padding: 10px;\n  display: flex;\n  border-top: 1px solid #e6ecf0;\n  border-bottom: 1px solid #e6ecf0;\n}\n.message-input {\n  flex: 1;\n  height: 35px;\n  outline: none;\n  border: none;\n  padding: 10px;\n  background: #e6ecf0;\n  border-radius: 50px;\n  font-size: 18px;\n  font-weight: 500;\n}\n.message-btn {\n  margin-bottom: 10px;\n}\n.message-img {\n  width: 25px;\n  height: 25px;\n}\n// 新增關於啟動聊天室的畫面效果\n.display-container-text {\n  width: 100%;\n  height: 100%;\n  cursor: not-allowed;\n}\n.display-container-img {\n  height: 850px;\n}\n.input-container-cursor-not-allowed {\n  cursor: not-allowed; \n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=fc839f76&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=fc839f76&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc839f76\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}