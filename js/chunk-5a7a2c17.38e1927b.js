(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a7a2c17"],{1206:function(t,e,a){"use strict";a("748b")},"20e2":function(t,e,a){},"6a90":function(t,e,a){"use strict";a("20e2")},"748b":function(t,e,a){},cd56:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("UserCreateTweet",{on:{"after-show-tweet-modal":t.afterShowModal}}),a("TweetCards",{on:{"after-show-reply-modal":t.afterShowReplyModal}})],1)},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"tweet-title"},[t._v("首頁")]),a("div",{staticClass:"create-tweet-card",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleTweetButtonCard()}}},[a("div",{staticClass:"tweet-card-img-container"},[a("img",{staticClass:"tweet-card-img",attrs:{src:t._f("emptyImage")(t.currentUser.avatar)}})]),a("span",{staticClass:"tweet-card-title"},[t._v("有什麼新鮮事?")]),a("button",{staticClass:"tweet-card-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleTweetButtonCard()}}},[t._v(" 推文 ")])])])},i=[],c=a("5530"),o=a("2f62"),d=a("2708"),l={name:"userCreateTweet",mixins:[d["a"]],data:function(){return{}},computed:Object(c["a"])({},Object(o["b"])(["currentUser"])),methods:{handleTweetButtonCard:function(){this.$emit("after-show-tweet-modal")}}},u=l,p=(a("6a90"),a("2877")),w=Object(p["a"])(u,n,i,!1,null,null,null),f=w.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tweet-cards"},t._l(t.tweetCards,(function(e){return a("div",{key:e.id,staticClass:"tweet-card"},[a("div",{staticClass:"tweet-card-top"},[a("div",{staticClass:"tweet-card-avatar"},[a("div",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toUserPage.apply(null,arguments)}}},[a("img",{staticClass:"tweet-card-img",attrs:{"data-userId":e.UserId,src:t._f("emptyImage")(e.tweetedUser.avatar)}})])]),a("div",{staticClass:"tweet-card-content",attrs:{"data-cardId":e.id},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toReplyList.apply(null,arguments)}}},[a("div",[a("span",{staticClass:"tweet-card-name",attrs:{"data-cardId":e.id}},[t._v(t._s(e.tweetedUser.name))]),a("span",{staticClass:"tweet-card-account",attrs:{"data-cardId":e.id}},[t._v(" @"+t._s(e.tweetedUser.account)+"．"+t._s(t._f("formatDate")(e.createdAt))+" ")]),a("p",{staticClass:"tweet-card-description",attrs:{"data-cardId":e.id}},[t._v(" "+t._s(e.description)+" ")])])])]),a("div",{staticClass:"tweet-card-icons"},[a("button",{staticClass:"tweet-reply-icon",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.handleTweetCardReplyButton(e.id)}}},[a("img",{staticClass:"icon-reply",attrs:{src:t.iconReply}}),a("span",[t._v(t._s(e.totalReplies))])]),e.isLiked?a("button",{staticClass:"tweet-like-icon",attrs:{disabled:t.isProcessing},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.deleteTweetLike(e.id)}}},[a("img",{staticClass:"icon-like",attrs:{src:t.iconIsLike}}),a("span",[t._v(t._s(e.totalLikes))])]):a("button",{staticClass:"tweet-like-icon",attrs:{disabled:t.isProcessing},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.addTweetCardLike(e.id)}}},[a("img",{staticClass:"icon-like",attrs:{src:t.iconUnLike}}),a("span",[t._v(t._s(e.totalLikes))])])])])})),0)},h=[],v=a("1da1"),g=(a("a9e3"),a("96cf"),a("e809")),C=a("2fa3"),k={name:"TweetCards",data:function(){return{tweetCards:[],iconUnLike:"https://i.imgur.com/fWY8yOj.png",iconIsLike:"https://i.imgur.com/LQTMNI0.png",iconReply:"https://i.imgur.com/EwJRYkP.png",isProcessing:!1}},mixins:[d["a"],d["b"]],created:function(){this.fetchTweetCards()},computed:Object(c["a"])({},Object(o["b"])(["currentUser"])),methods:{fetchTweetCards:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g["a"].getTweetCards();case 3:a=e.sent,r=a.data,t.tweetCards=r,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0),C["a"].fire({icon:"error",title:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},handleTweetCardReplyButton:function(t){this.$emit("after-show-reply-modal",t)},addTweetCardLike:function(t){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,g["a"].addTweetLike(t);case 4:return a.next=6,e.fetchTweetCards();case 6:C["a"].fire({icon:"success",title:"成功加入喜歡的內容"}),e.isProcessing=!1,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),e.isProcessing=!1,C["a"].fire({icon:"error",title:a.t0.response.data.message});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},deleteTweetLike:function(t){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,g["a"].deleteTweetLike(t);case 4:return a.next=6,e.fetchTweetCards();case 6:C["a"].fire({icon:"success",title:"成功取消喜歡的內容"}),e.isProcessing=!1,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),e.isProcessing=!1,C["a"].fire({icon:"error",title:a.t0.response.data.message});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},toReplyList:function(t){var e=t.target.dataset.cardid;e&&this.$router.push({name:"ReplyList",params:{id:e}})},toUserPage:function(t){var e=Number(t.target.dataset.userid),a=this.currentUser.id;e===a?this.$router.push({name:"UserSelf"}):e&&this.$router.push({name:"UserOther",params:{id:e}})}}},b=k,_=(a("1206"),Object(p["a"])(b,m,h,!1,null,null,null)),T=_.exports,y={name:"UserMain",components:{UserCreateTweet:f,TweetCards:T},data:function(){return{showModal:!1}},methods:{afterShowModal:function(){this.$emit("after-show-tweet-modal")},afterShowReplyModal:function(t){this.$emit("after-show-reply-modal",t)}}},P=y,L=Object(p["a"])(P,r,s,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-5a7a2c17.38e1927b.js.map